// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Game {
  id         Int        @id @default(autoincrement())
  name       String     @unique
  premium    Boolean
  image      String
  popularity Int
  gameList   Gameplay[]
}

model User {
  id             Int           @id @default(autoincrement())
  username       String        @unique
  password       String
  gender         String
  birthday       DateTime
  createdAt      DateTime      @default(now())
  lastConnection DateTime
  scoreList      Gamescore[]
  userPremium    UserPremium[]
}

model UserPremium {
  id                Int      @id @default(autoincrement())
  subscriptionAt    DateTime @default(now())
  duration          Int
  subscriptionEndAt DateTime
  user              User     @relation(fields: [idUser], references: [id])
  idUser            Int
}

model Gameplay {
  id        Int         @id @default(autoincrement())
  playedAt  DateTime
  duration  Int
  game      Game        @relation(fields: [idGame], references: [id])
  idGame    Int
  scoreList Gamescore[]
}

model Gamescore {
  history   Gameplay @relation(fields: [idHistory], references: [id])
  idHistory Int      @id @default(autoincrement())
  user      User     @relation(fields: [idUser], references: [id])
  idUser    Int
  score     Int

  @@unique([idHistory, idUser])
}
